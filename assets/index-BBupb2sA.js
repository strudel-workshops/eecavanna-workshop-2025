import{d as n,j as e,B as o,D as W,S as m,n as q,o as z,p as E,q as M,T as g,v as w,w as O,P as _,A as N,x as U,L as y}from"./index-BIR1dnOf.js";import{u as $,F as G,a as J}from"./FilterField-DYAY-Yqw.js";import{P as Q}from"./PageHeader--7_L-ODD.js";import{S as K}from"./SciDataGrid-IUx4Mlzw.js";import{u as X,f as Y,F as Z}from"./useListQuery-BZvjuNW6.js";import{S as ee,C as se}from"./DataGrid-CSnaJ4DU.js";import{A as re,C as te}from"./Close-CoxJcXRT.js";import"./DatePicker-CVEn9Imb.js";import"./DateCalendar-BqQhh8hy.js";import"./colorManipulator-Dzh3cjE4.js";import"./Home-BCyaZ6SI.js";import"./Grid-cID9SxXz.js";import"./useQuery-CRGha0wG.js";import"./useGridRootProps-DcMf8h6v.js";import"./MenuItem-C9MxO-98.js";import"./dividerClasses-DDvbHt9W.js";import"./Divider-BAa2uDna.js";const ae=({filterConfigs:s,searchTerm:t,setPreviewItem:r,onRefetchReady:a})=>{const{activeFilters:l}=$(),[d,x]=n.useState(0),[c,F]=n.useState(25),[R,S]=n.useState(d*c),C="id",v="client",{isPending:P,isFetching:k,isError:T,data:I,error:B,refetch:b}=X({activeFilters:l,dataSource:"data/getUsersResponseBody.json",filterConfigs:s,offset:R,pageSize:c,queryMode:v,staticParams:null});n.useEffect(()=>{a&&b&&a(b)},[a,b]);const V=i=>{r(i.row)},H=i=>{const h=i.pageSize!==c?0:i.page,u=i.pageSize,p=h*u;x(h),F(u),S(p)};if(P){const h=new Array(c).fill(null).map((u,p)=>p);return e.jsx(o,{sx:{padding:2},children:h.map(u=>e.jsx(ee,{height:50},u))})}return T?e.jsx(re,{severity:"error",children:B.message}):e.jsxs(e.Fragment,{children:[k&&e.jsx(W,{variant:"indeterminate"}),e.jsx(K,{rows:Y(I,l,s,t),pagination:!0,paginationMode:v,onPaginationModelChange:H,getRowId:i=>i[C],columns:[{field:"id",headerName:"ID",width:100},{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"emailAddr",headerName:"Email Address",width:250},{field:"roleNames",headerName:"Roles",width:200,renderCell:i=>{const h=i.value;return Array.isArray(h)?e.jsx(o,{sx:{display:"flex",alignItems:"center",height:"100%"},children:e.jsx(m,{direction:"row",spacing:.5,flexWrap:"wrap",useFlexGap:!0,children:h.map((u,p)=>e.jsx(se,{label:u,size:"small",color:"primary",variant:"outlined"},p))})}):null}}],disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:d,pageSize:c}}},onRowClick:V})]})};var f={},A;function ie(){if(A)return f;A=1;var s=q();Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var t=s(z()),r=E();return f.default=(0,t.default)((0,r.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),f}var ne=ie();const oe=M(ne);var j={},L;function le(){if(L)return j;L=1;var s=q();Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var t=s(z()),r=E();return j.default=(0,t.default)((0,r.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),j}var de=le();const ce=M(de),he=({searchTerm:s,setSearchTerm:t,onToggleFiltersPanel:r,onRefresh:a})=>{const l=x=>{t(x.target.value)},d=()=>{a&&a()};return e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(g,{variant:"h6",component:"h2",flex:1,children:"Users"}),e.jsx(w,{startIcon:e.jsx(ce,{}),onClick:d,children:"Refresh"}),e.jsx(w,{startIcon:e.jsx(oe,{}),onClick:r,children:"Filters"}),e.jsx(O,{variant:"outlined",label:"Search",size:"small",value:s,onChange:l})]})},ue=({filterConfigs:s,onClose:t})=>e.jsx(Z,{grouped:!1,onClose:t,sx:{border:"none"},children:s.map((r,a)=>e.jsx(G,{field:r.field,label:r.label,operator:"contains",filterComponent:r.filterComponent,filterProps:r.filterProps},`${r.field}-${a}`))}),me=({previewItem:s,onClose:t})=>e.jsx(_,{elevation:0,sx:{height:"100%",padding:2},children:e.jsxs(m,{spacing:3,children:[e.jsxs(m,{spacing:1,children:[e.jsxs(m,{direction:"row",children:[e.jsx(g,{variant:"h6",component:"h3",flex:1,children:e.jsxs(N,{to:"/explore-data/$id",params:{id:s.id},children:[s.firstName," ",s.lastName]})}),e.jsx(U,{size:"small",onClick:t,children:e.jsx(te,{})})]}),e.jsx(g,{variant:"body2",children:s.emailAddr})]}),e.jsxs(o,{children:[e.jsx(g,{fontWeight:"medium",mb:1,children:"Contact Information"}),e.jsx(y,{rows:[{label:"First Name",value:s.firstName},{label:"Last Name",value:s.lastName},{label:"Email Address",value:s.emailAddr}]})]}),e.jsxs(o,{children:[e.jsx(g,{fontWeight:"medium",mb:1,children:"Roles & Permissions"}),e.jsx(y,{rows:[{label:"Roles",value:Array.isArray(s.roleNames)?s.roleNames.join(", "):s.roleNames}]})]}),e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(N,{to:"/explore-data/$id",params:{id:s.id},children:e.jsx(w,{variant:"contained",children:"View details"})}),e.jsx(w,{variant:"outlined",children:"Export data"})]})]})}),D=[{field:"roleNames",label:"Role",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"User",value:"user"},{label:"Admin",value:"admin"}]}}],De=function(){const[t,r]=n.useState(""),[a,l]=n.useState(),[d,x]=n.useState(!0),[c,F]=n.useState(null),R=()=>{x(!1)},S=()=>{x(!d)},C=()=>{l(null)},v=P=>{F(()=>P)};return e.jsx(J,{children:e.jsxs(o,{children:[e.jsx(Q,{pageTitle:"User Management",description:"Browse and manage system users",sx:{marginBottom:1,padding:2}}),e.jsx(o,{children:e.jsxs(m,{direction:"row",children:[d&&e.jsx(o,{sx:{width:"350px"},children:e.jsx(ue,{filterConfigs:D,onClose:R})}),e.jsxs(_,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(he,{searchTerm:t,setSearchTerm:r,onToggleFiltersPanel:S,onRefresh:c}),e.jsx(ae,{filterConfigs:D,searchTerm:t,setPreviewItem:l,onRefetchReady:v})]}),a&&e.jsx(o,{sx:{minWidth:"400px"},children:e.jsx(me,{previewItem:a,onClose:C})})]})})]})})};export{De as component};

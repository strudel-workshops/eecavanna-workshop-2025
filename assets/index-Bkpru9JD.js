import{d as c,j as e,B as l,D as M,n as T,o as k,p as B,q as H,S as d,T as x,v as F,w as V,P as b,A as S,x as _,L as P}from"./index-CQ4yjKG7.js";import{u as I,F as U,a as W}from"./FilterField-dKcEs5nZ.js";import{P as $}from"./PageHeader-CUWy2tNU.js";import{S as O}from"./SciDataGrid-KHF3z8uI.js";import{u as G,f as J,F as Q}from"./useListQuery-CNoGuAk3.js";import{S as K}from"./DataGrid-CtmZIwuI.js";import{A as X,C as Y}from"./Close-Civ5aeWl.js";import"./DatePicker-BtjrWYJ6.js";import"./DateCalendar-Dw2Vvsna.js";import"./colorManipulator-Bv5oR6AX.js";import"./Grid-C8PVXu0u.js";import"./useQuery-eQuWzYB8.js";import"./useGridRootProps-B0b8bAD5.js";import"./MenuItem-Cukx7cJ5.js";import"./dividerClasses-B2r_iBYE.js";import"./Divider-BVuvr-Qv.js";const Z=({filterConfigs:s,searchTerm:a,setPreviewItem:t})=>{const{activeFilters:i}=I(),[o,u]=c.useState(0),[n,g]=c.useState(25),[j,f]=c.useState(o*n),R="id",w="client",{isPending:y,isFetching:A,isError:L,data:z,error:D}=G({activeFilters:i,dataSource:"data/getUsersResponseBody.json",filterConfigs:s,offset:j,pageSize:n,queryMode:w,staticParams:null}),q=r=>{t(r.row)},E=r=>{const p=r.pageSize!==n?0:r.page,m=r.pageSize,v=p*m;u(p),g(m),f(v)};if(y){const p=new Array(n).fill(null).map((m,v)=>v);return e.jsx(l,{sx:{padding:2},children:p.map(m=>e.jsx(K,{height:50},m))})}return L?e.jsx(X,{severity:"error",children:D.message}):e.jsxs(e.Fragment,{children:[A&&e.jsx(M,{variant:"indeterminate"}),e.jsx(O,{rows:J(z,i,s,a),pagination:!0,paginationMode:w,onPaginationModelChange:E,getRowId:r=>r[R],columns:[{field:"id",headerName:"ID",width:100},{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"emailAddr",headerName:"Email Address",width:250},{field:"roleNames",headerName:"Roles",width:200,valueGetter:r=>Array.isArray(r)?r.join(", "):r}],disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:o,pageSize:n}}},onRowClick:q})]})};var h={},C;function ee(){if(C)return h;C=1;var s=T();Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var a=s(k()),t=B();return h.default=(0,a.default)((0,t.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),h}var se=ee();const te=H(se),ae=({searchTerm:s,setSearchTerm:a,onToggleFiltersPanel:t})=>{const i=o=>{a(o.target.value)};return e.jsxs(d,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(x,{variant:"h6",component:"h2",flex:1,children:"Users"}),e.jsx(F,{startIcon:e.jsx(te,{}),onClick:t,children:"Filters"}),e.jsx(V,{variant:"outlined",label:"Search",size:"small",value:s,onChange:i})]})},re=({filterConfigs:s,onClose:a})=>e.jsx(Q,{grouped:!1,onClose:a,sx:{border:"none"},children:s.map((t,i)=>e.jsx(U,{field:t.field,label:t.label,operator:"contains",filterComponent:t.filterComponent,filterProps:t.filterProps},`${t.field}-${i}`))}),ie=({previewItem:s,onClose:a})=>e.jsx(b,{elevation:0,sx:{height:"100%",padding:2},children:e.jsxs(d,{spacing:3,children:[e.jsxs(d,{spacing:1,children:[e.jsxs(d,{direction:"row",children:[e.jsx(x,{variant:"h6",component:"h3",flex:1,children:e.jsxs(S,{to:"/explore-data/$id",params:{id:s.id},children:[s.firstName," ",s.lastName]})}),e.jsx(_,{size:"small",onClick:a,children:e.jsx(Y,{})})]}),e.jsx(x,{variant:"body2",children:s.emailAddr})]}),e.jsxs(l,{children:[e.jsx(x,{fontWeight:"medium",mb:1,children:"Contact Information"}),e.jsx(P,{rows:[{label:"First Name",value:s.firstName},{label:"Last Name",value:s.lastName},{label:"Email Address",value:s.emailAddr}]})]}),e.jsxs(l,{children:[e.jsx(x,{fontWeight:"medium",mb:1,children:"Roles & Permissions"}),e.jsx(P,{rows:[{label:"Roles",value:Array.isArray(s.roleNames)?s.roleNames.join(", "):s.roleNames}]})]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(S,{to:"/explore-data/$id",params:{id:s.id},children:e.jsx(F,{variant:"contained",children:"View details"})}),e.jsx(F,{variant:"outlined",children:"Export data"})]})]})}),N=[{field:"roleNames",label:"Role",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"User",value:"user"},{label:"Admin",value:"admin"}]}}],Se=function(){const[a,t]=c.useState(""),[i,o]=c.useState(),[u,n]=c.useState(!0),g=()=>{n(!1)},j=()=>{n(!u)},f=()=>{o(null)};return e.jsx(W,{children:e.jsxs(l,{children:[e.jsx($,{pageTitle:"User Management",description:"Browse and manage system users",sx:{marginBottom:1,padding:2}}),e.jsx(l,{children:e.jsxs(d,{direction:"row",children:[u&&e.jsx(l,{sx:{width:"350px"},children:e.jsx(re,{filterConfigs:N,onClose:g})}),e.jsxs(b,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(ae,{searchTerm:a,setSearchTerm:t,onToggleFiltersPanel:j}),e.jsx(Z,{filterConfigs:N,searchTerm:a,setPreviewItem:o})]}),i&&e.jsx(l,{sx:{minWidth:"400px"},children:e.jsx(ie,{previewItem:i,onClose:f})})]})})]})})};export{Se as component};

import{d as n,j as e,B as c,D as O,n as q,o as z,p as E,q as M,S as u,T as p,v,w as U,P as _,A as N,x as W,L as y}from"./index-DCCojSDf.js";import{u as $,F as G,a as J}from"./FilterField-DDzwaT5w.js";import{P as Q}from"./PageHeader-DZK1CnGb.js";import{S as K}from"./SciDataGrid-CDSEl8l2.js";import{u as X,f as Y,F as Z}from"./useListQuery-BC0Vf_9p.js";import{S as ee}from"./DataGrid-BQyJQTWY.js";import{A as te,C as se}from"./Close-CBjPFo8c.js";import"./DatePicker-HoSfz2qj.js";import"./DateCalendar-BkJ22otG.js";import"./colorManipulator-yKKS4gJZ.js";import"./Grid-S7YEvYVL.js";import"./useQuery-DMuGbc9B.js";import"./useGridRootProps-PNMp6prl.js";import"./MenuItem-D0Kp5xvI.js";import"./dividerClasses-uXPz-weR.js";import"./Divider-CUcolBIV.js";const re=({filterConfigs:t,searchTerm:r,setPreviewItem:s,onRefetchReady:i})=>{const{activeFilters:o}=$(),[l,h]=n.useState(0),[d,R]=n.useState(25),[S,F]=n.useState(l*d),w="id",j="client",{isPending:P,isFetching:k,isError:T,data:B,error:I,refetch:C}=X({activeFilters:o,dataSource:"data/getUsersResponseBody.json",filterConfigs:t,offset:S,pageSize:d,queryMode:j,staticParams:null});n.useEffect(()=>{i&&C&&i(C)},[i,C]);const V=a=>{s(a.row)},H=a=>{const g=a.pageSize!==d?0:a.page,m=a.pageSize,b=g*m;h(g),R(m),F(b)};if(P){const g=new Array(d).fill(null).map((m,b)=>b);return e.jsx(c,{sx:{padding:2},children:g.map(m=>e.jsx(ee,{height:50},m))})}return T?e.jsx(te,{severity:"error",children:I.message}):e.jsxs(e.Fragment,{children:[k&&e.jsx(O,{variant:"indeterminate"}),e.jsx(K,{rows:Y(B,o,t,r),pagination:!0,paginationMode:j,onPaginationModelChange:H,getRowId:a=>a[w],columns:[{field:"id",headerName:"ID",width:100},{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"emailAddr",headerName:"Email Address",width:250},{field:"roleNames",headerName:"Roles",width:200,valueGetter:a=>Array.isArray(a)?a.join(", "):a}],disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:l,pageSize:d}}},onRowClick:V})]})};var x={},A;function ae(){if(A)return x;A=1;var t=q();Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var r=t(z()),s=E();return x.default=(0,r.default)((0,s.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),x}var ie=ae();const ne=M(ie);var f={},L;function oe(){if(L)return f;L=1;var t=q();Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var r=t(z()),s=E();return f.default=(0,r.default)((0,s.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),f}var le=oe();const de=M(le),ce=({searchTerm:t,setSearchTerm:r,onToggleFiltersPanel:s,onRefresh:i})=>{const o=h=>{r(h.target.value)},l=()=>{i&&i()};return e.jsxs(u,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(p,{variant:"h6",component:"h2",flex:1,children:"Users"}),e.jsx(v,{startIcon:e.jsx(de,{}),onClick:l,children:"Refresh"}),e.jsx(v,{startIcon:e.jsx(ne,{}),onClick:s,children:"Filters"}),e.jsx(U,{variant:"outlined",label:"Search",size:"small",value:t,onChange:o})]})},he=({filterConfigs:t,onClose:r})=>e.jsx(Z,{grouped:!1,onClose:r,sx:{border:"none"},children:t.map((s,i)=>e.jsx(G,{field:s.field,label:s.label,operator:"contains",filterComponent:s.filterComponent,filterProps:s.filterProps},`${s.field}-${i}`))}),ue=({previewItem:t,onClose:r})=>e.jsx(_,{elevation:0,sx:{height:"100%",padding:2},children:e.jsxs(u,{spacing:3,children:[e.jsxs(u,{spacing:1,children:[e.jsxs(u,{direction:"row",children:[e.jsx(p,{variant:"h6",component:"h3",flex:1,children:e.jsxs(N,{to:"/explore-data/$id",params:{id:t.id},children:[t.firstName," ",t.lastName]})}),e.jsx(W,{size:"small",onClick:r,children:e.jsx(se,{})})]}),e.jsx(p,{variant:"body2",children:t.emailAddr})]}),e.jsxs(c,{children:[e.jsx(p,{fontWeight:"medium",mb:1,children:"Contact Information"}),e.jsx(y,{rows:[{label:"First Name",value:t.firstName},{label:"Last Name",value:t.lastName},{label:"Email Address",value:t.emailAddr}]})]}),e.jsxs(c,{children:[e.jsx(p,{fontWeight:"medium",mb:1,children:"Roles & Permissions"}),e.jsx(y,{rows:[{label:"Roles",value:Array.isArray(t.roleNames)?t.roleNames.join(", "):t.roleNames}]})]}),e.jsxs(u,{direction:"row",spacing:1,children:[e.jsx(N,{to:"/explore-data/$id",params:{id:t.id},children:e.jsx(v,{variant:"contained",children:"View details"})}),e.jsx(v,{variant:"outlined",children:"Export data"})]})]})}),D=[{field:"roleNames",label:"Role",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"User",value:"user"},{label:"Admin",value:"admin"}]}}],Ae=function(){const[r,s]=n.useState(""),[i,o]=n.useState(),[l,h]=n.useState(!0),[d,R]=n.useState(null),S=()=>{h(!1)},F=()=>{h(!l)},w=()=>{o(null)},j=P=>{R(()=>P)};return e.jsx(J,{children:e.jsxs(c,{children:[e.jsx(Q,{pageTitle:"User Management",description:"Browse and manage system users",sx:{marginBottom:1,padding:2}}),e.jsx(c,{children:e.jsxs(u,{direction:"row",children:[l&&e.jsx(c,{sx:{width:"350px"},children:e.jsx(he,{filterConfigs:D,onClose:S})}),e.jsxs(_,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(ce,{searchTerm:r,setSearchTerm:s,onToggleFiltersPanel:F,onRefresh:d}),e.jsx(re,{filterConfigs:D,searchTerm:r,setPreviewItem:o,onRefetchReady:j})]}),i&&e.jsx(c,{sx:{minWidth:"400px"},children:e.jsx(ue,{previewItem:i,onClose:w})})]})})]})})};export{Ae as component};
